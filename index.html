<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Realschule Lage</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .invisible-history-btn {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            z-index: 1;
            cursor: pointer;
        }
        .stat-item {
            position: relative;
        }
        .zeugnis-top {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .zeugnis-top .zeugnis-section {
            flex: 1;
        }
        .zeugnis-section h4 {
            margin-bottom: 10px;
        }
        .desk.has-schulplaner-entry {
            background-color: lightblue !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pfadnavigation -->
        <div class="breadcrumb">
            <a href="#" id="home-link"><i class="fas fa-home"></i> Startseite</a>
            <span class="breadcrumb-active" id="breadcrumb-active"></span>
        </div>
        
        <!-- Seitencontainer -->
        <div id="pages-container">
            <!-- Startseite -->
            <div id="home-page" class="page">
                <div class="card">
                    <div class="card-header">
                        <h2>Klassen</h2>
                        <div class="card-header-actions">
                            <button class="btn btn-secondary btn-icon" id="sort-classes-btn" onclick="toggleClassSorting()">
                                <i class="fas fa-arrows-alt"></i> Sortieren
                            </button>
                            <button class="btn btn-primary btn-icon" onclick="showModal('add-class-modal')">
                                <i class="fas fa-plus"></i> Klasse hinzufügen
                            </button>
                            <button class="btn btn-primary btn-icon" onclick="exportAllData(event)" title="Alle Daten als Datei exportieren">
                                <i class="fas fa-arrow-down"></i> Exportieren
                            </button>
                            <button class="btn btn-secondary btn-icon" onclick="handleImportButtonClick(event)" title="Daten aus Datei importieren">
                                <i class="fas fa-arrow-up"></i> Importieren
                            </button>
                        </div>
                    </div>
                    
                    <div id="classes-grid" class="classes-grid">
                        <!-- Hier werden die Klassen dynamisch eingefügt -->
                    </div>
                </div>
                
                <input type="file" id="import-backup-file" accept=".json" style="display: none;" onchange="importBackupFile(event)">
            </div>

            <!-- Klassendetail-Seite -->
            <div id="class-page" class="page" style="display: none;">
                <!-- Modulnavigation -->
                <div class="module-nav" id="module-nav">
                    <div class="module-nav-item" data-module="schueler">
                        <button class="btn btn-light" onclick="showModule('schueler')">
                            <i class="fas fa-user-graduate"></i>
                        </button>
                    </div>
                    <div class="module-nav-item" data-module="sitzplan">
                        <button class="btn btn-light" onclick="showModule('sitzplan')">
                            <i class="fas fa-chair"></i>
                        </button>
                    </div>
                    <div class="module-nav-item" data-module="noten">
                        <button class="btn btn-light" onclick="showModule('noten')">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                    <div class="module-nav-item" data-module="zeugnis">
                        <button class="btn btn-light" onclick="showModule('zeugnis')">
                            <i class="fas fa-graduation-cap"></i>
                        </button>
                    </div>
                    <div class="module-nav-item" data-module="listen">
                        <button class="btn btn-light" onclick="showModule('listen')">
                            <i class="fas fa-tasks"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Container für Module -->
                <div id="modules-container">
                    <!-- Schüler Modul -->
                    <div id="schueler-module" class="module">
                        <div class="card">
                            <div class="card-header">
                                <h2>Schülerliste</h2>
                                <div>
                                    <button class="btn btn-secondary btn-icon" onclick="showExportStudentsModal()">
                                        <svg class="btn-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                            <path d="M12 3v14M19 10l-7 7-7-7" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                        </svg>
                                        Schülerliste exportieren
                                    </button>
                                </div>
                            </div>
                            
                            <div class="student-list-container">
                                <table class="student-list-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 50px;">Nr.</th>
                                            <th>Name</th>
                                            <th style="width: 80px; text-align: center;">Lernen</th>
                                            <th style="width: 100px; text-align: right;">Aktionen</th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-list-table">
                                        <!-- Hier werden die Schüler dynamisch eingefügt -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Massenimport -->
                            <div class="card" style="margin-top: 20px;">
                                <div class="card-header">
                                    <h2>Schüler hinzufügen</h2>
                                </div>
                                <div class="import-container">
                                    <p>Füge Namen ein (einen Namen pro Zeile):</p>
                                    <textarea id="import-names" class="form-control" rows="5" placeholder="Max Mustermann&#10;Erika Musterfrau&#10;..."></textarea>
                                    <button class="btn btn-primary btn-icon" style="margin-top: 10px;" onclick="importStudents()">
                                        <i class="fas fa-file-import"></i> Hinzufügen
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sitzplan Modul -->
                    <div id="sitzplan-module" class="module" style="display: none;">
                        <div class="card">
                                <div class="card-header">
                                    <h2>Sitzplan</h2>
                                    <div>
                                        <button class="btn btn-secondary btn-icon" onclick="exportSitzplanAsJPEG()" title="Sitzplan exportieren">
                                            <svg class="btn-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                                <path d="M12 3v14M19 10l-7 7-7-7" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                            </svg>
                                            Sitzplan exportieren
                                        </button>
                                    </div>
                                </div>
                            
                                <!-- Button-Leiste über dem Sitzplan -->
                <div class="sitzplan-controls">
                <button class="btn btn-primary btn-icon" id="edit-mode-btn" onclick="setMode('edit')">
                    Bearbeiten
                </button>
                <button class="btn btn-primary btn-icon" id="oral-mode-btn" onclick="setMode('oral')">
                    Mündlich
                </button>
                <button class="btn btn-primary btn-icon" id="evaluation-mode-btn" onclick="setMode('evaluation')">
                    Bewerten
                </button>
            </div>                            <div class="sitzplan-container">
                                <div class="main-content">
                                    <div class="workspace" id="workspace">
                                        <div class="grid-lines"></div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    
                    <!-- Noten Modul -->
                    <div id="noten-module" class="module" style="display: none;">
                        <!-- Schülerliste Card first -->
                        <div class="card">
                            <div class="card-header">
                                <h2>Schriftlich</h2>
                                <div>
                                    <button class="btn btn-secondary btn-icon" id="sort-students-btn">
                                        <i class="fas fa-sort-alpha-down"></i> Sortieren
                                    </button>
                                    <button class="btn btn-primary btn-icon" id="collapse-all-btn" onclick="collapseAllStudents()">
                                        <i class="fas fa-compress-alt"></i> Einklappen
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="showAddProjectToAllModal()">
                                        <i class="fas fa-plus"></i> Projekt
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="showDeleteProjectForAllModal()">
                                        <i class="fas fa-trash"></i> Löschen
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="exportGrades()">
                                        <svg class="btn-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                            <path d="M12 3v14M19 10l-7 7-7-7" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                        </svg>
                                        Noten exportieren
                                    </button>
                                    <button class="btn btn-info btn-icon" onclick="toggleSearch('noten')">
                                        <i class="fas fa-search"></i> Suchen
                                    </button>
                                </div>
                            </div>
                            <div class="search-container" id="search-container-noten" style="display: none;">
                                <input type="text" class="form-control search-input" id="search-input-noten" placeholder="Schüler suchen..." oninput="filterStudents('noten')">
                                <ul class="search-suggestions" id="search-suggestions-noten"></ul>
                            </div>
                            <div class="student-list-wrapper" id="students-list-wrapper">
                                <div class="student-list" id="students-list">
                                    <!-- Hier werden die Schüler dynamisch eingefügt -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notenverwaltung Card second -->
                        <div class="card">
                            <div class="card-header">
                                <h2>Gewichtung mündliche Note</h2>
                                <button class="btn btn-secondary btn-icon" onclick="toggleGradeTable()">
                                    <i class="fas fa-table"></i> Notentabelle
                                </button>
                            </div>
                            
                            <!-- Notenumrechnungstabelle -->
                            <table class="grade-table" id="gradeTable">
                                <thead>
                                    <tr>
                                        <th>Note</th>
                                        <th>Dezimalwert</th>
                                        <th>Bedeutung</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>1</td><td>1.0</td><td>Sehr gut</td></tr>
                                    <tr><td>1-</td><td>1.33</td><td>Sehr gut minus</td></tr>
                                    <tr><td>2+</td><td>1.66</td><td>Gut plus</td></tr>
                                    <tr><td>2</td><td>2.0</td><td>Gut</td></tr>
                                    <tr><td>2-</td><td>2.33</td><td>Gut minus</td></tr>
                                    <tr><td>3+</td><td>2.66</td><td>Befriedigend plus</td></tr>
                                    <tr><td>3</td><td>3.0</td><td>Befriedigend</td></tr>
                                    <tr><td>3-</td><td>3.33</td><td>Befriedigend minus</td></tr>
                                    <tr><td>4+</td><td>3.66</td><td>Ausreichend plus</td></tr>
                                    <tr><td>4</td><td>4.0</td><td>Ausreichend</td></tr>
                                    <tr><td>4-</td><td>4.33</td><td>Ausreichend minus</td></tr>
                                    <tr><td>5+</td><td>4.66</td><td>Mangelhaft plus</td></tr>
                                    <tr><td>5</td><td>5.0</td><td>Mangelhaft</td></tr>
                                    <tr><td>5-</td><td>5.33</td><td>Mangelhaft minus</td></tr>
                                    <tr><td>6+</td><td>5.66</td><td>Ungenügend plus</td></tr>
                                    <tr><td>6</td><td>6.0</td><td>Ungenügend</td></tr>
                                </tbody>
                            </table>

                            <div class="form-group">
                                <label>Gewichtung mündlich: <span id="oralWeightValue">50</span>%</label>
                                <div class="weight-buttons">
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(0)">0%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(10)">10%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(20)">20%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(30)">30%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(40)">40%</button>
                                    <button class="btn btn-sm weight-btn active-weight" onclick="setWeight(50)">50%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(60)">60%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(70)">70%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(80)">80%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(90)">90%</button>
                                    <button class="btn btn-sm weight-btn" onclick="setWeight(100)">100%</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Projekt-Statistiken Card remains third -->
                        <div class="card" id="project-statistics-card">
                            <div class="card-header collapsible-header" onclick="toggleProjectStatistics()">
                                <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                                    <h2>Projekt-Statistiken</h2>
                                </div>
                                <div class="collapse-icon">
                                    <i id="project-stats-toggle-icon" class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div id="project-statistics-content" class="collapse-content project-statistics-content" style="display: none;">
                                <div style="margin-bottom: 15px;">
                                    <select id="project-number-select" class="form-control" onchange="updateProjectStatistics(event)">
                                        <option value="">Alle Projekte</option>
                                        <!-- Projekt-Optionen werden dynamisch hinzugefügt -->
                                    </select>
                                </div>
                                <div class="project-average">
                                    <h3>Durchschnittsnote: <span id="project-average-value">-</span></h3>
                                </div>
                                <div class="project-distribution-container">
                                    <h3>Notenverteilung:</h3>
                                    <div id="project-distribution-graph" class="distribution-graph"></div>
                                </div>
                                <div id="project-stats-empty" class="empty-state" style="display: none;">
                                    <i class="fas fa-chart-line"></i>
                                    <p>Keine Noten für dieses Projekt vorhanden</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Listen Modul -->
                    <div id="listen-module" class="module" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h2>Listen</h2>
                                <div>
                                    <button class="btn btn-secondary btn-icon" id="sort-lists-btn" onclick="toggleSortLists()">
                                        <i class="fas fa-sort-alpha-down"></i> Sortieren
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="showModal('add-list-modal')">
                                        <i class="fas fa-plus"></i> Neue Liste
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="showEditListModal()">
                                        <i class="fas fa-edit"></i> Liste bearbeiten
                                    </button>
                                    <button class="btn btn-primary btn-icon" onclick="showDeleteListModal()">
                                        <i class="fas fa-trash"></i> Liste löschen
                                    </button>
                                    <button class="btn btn-info btn-icon" onclick="toggleSearch('listen')">
                                        <i class="fas fa-search"></i> Suchen
                                    </button>
                                </div>
                            </div>
                            <div class="search-container" id="search-container-listen" style="display: none;">
                                <input type="text" class="form-control search-input" id="search-input-listen" placeholder="Schüler suchen..." oninput="filterStudents('listen')">
                                <ul class="search-suggestions" id="search-suggestions-listen"></ul>
                            </div>
                            
                            <div class="tab-nav" id="lists-tab-nav">
                                <!-- Hier werden die Listenreiter dynamisch eingefügt -->
                            </div>
                            
                            <div id="lists-container">
                                <!-- Hier werden die Listen dynamisch eingefügt -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Zeugnis Modul -->
                    <div id="zeugnis-module" class="module" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h2>Zeugnis</h2>
                                <div>
                                    <button class="btn btn-primary btn-icon" onclick="exportAllStudentCards()">
                                        <svg class="btn-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                            <path d="M12 3v14M19 10l-7 7-7-7" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                        </svg>
                                        Zeugnisse exportieren
                                    </button>
                                    <button class="btn btn-light btn-icon" id="zeugnis-view-toggle" onclick="toggleZeugnisView()">
                                        <i class="fas fa-calculator"></i> Durchschnitt
                                    </button>
                                    <button class="btn btn-info btn-icon" onclick="toggleSearch('zeugnis')">
                                        <i class="fas fa-search"></i> Suchen
                                    </button>
                                </div>
                            </div>
                            <div class="search-container" id="search-container-zeugnis" style="display: none;">
                                <input type="text" class="form-control search-input" id="search-input-zeugnis" placeholder="Schüler suchen..." oninput="filterStudents('zeugnis')">
                                <ul class="search-suggestions" id="search-suggestions-zeugnis"></ul>
                            </div>
                            
                            <div id="zeugnis-container">
                                <!-- Hier werden die Schüler-Karteikarten dynamisch eingefügt -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modals -->
        <div id="modal-container" style="display: none;" onclick="closeModalOnOutsideClick(event)" role="dialog" aria-modal="true" aria-hidden="true">
            <!-- Klasse hinzufügen Modal -->
            <div id="add-class-modal" class="modal" style="display: none;" role="dialog" aria-labelledby="add-class-title">
                <h2 id="add-class-title">Neue Klasse hinzufügen</h2>
                <div class="form-group">
                    <label for="new-class-name">Klassenname</label>
                    <input type="text" id="new-class-name" class="form-control" placeholder="z.B. 9a, 10b, Englisch GK12">
                </div>
                <div class="form-group">
                    <label for="new-class-subject">Fach (optional)</label>
                    <input type="text" id="new-class-subject" class="form-control" placeholder="z.B. Mathematik, Englisch">
                </div>
                <div class="form-group">
                    <label for="new-class-color">Klassenfarbe</label>
                    <select id="new-class-color" class="form-control">
                        <option value="#6c757d">Grau</option>
                        <option value="#007bff">Blau</option>
                        <option value="#28a745">Grün</option>
                        <option value="#dc3545">Rot</option>
                        <option value="#ffc107">Gelb</option>
                        <option value="#6f42c1">Lila</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="createClass()">Erstellen</button>
                </div>
            </div>
            
            <!-- Liste hinzufügen Modal -->
            <div id="add-list-modal" class="modal" style="display: none;">
                <h2>Neue Liste erstellen</h2>
                <div class="form-group">
                    <input type="text" id="new-list-name" class="form-control" placeholder="z.B. Unterschriften Mathearbeit, Elternabend">
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="createList()">Erstellen</button>
                </div>
            </div>
            
            <!-- Individuelle Note eintragen Modal -->
            <div id="individual-grade-modal" class="modal" style="display: none;">
                <h2>Individuelle Note eintragen</h2>
                <p id="individual-grade-student-name">Schüler: </p>
                <div class="form-group">
                    <label for="individual-grade-select">Note</label>
                    <select id="individual-grade-select" class="form-control">
                        <option value="">Keine individuelle Note</option>
                        <option value="1">1 (Sehr gut)</option>
                        <option value="1-">1- (Sehr gut minus)</option>
                        <option value="2+">2+ (Gut plus)</option>
                        <option value="2">2 (Gut)</option>
                        <option value="2-">2- (Gut minus)</option>
                        <option value="3+">3+ (Befriedigend plus)</option>
                        <option value="3">3 (Befriedigend)</option>
                        <option value="3-">3- (Befriedigend minus)</option>
                        <option value="4+">4+ (Ausreichend plus)</option>
                        <option value="4">4 (Ausreichend)</option>
                        <option value="4-">4- (Ausreichend minus)</option>
                        <option value="5+">5+ (Mangelhaft plus)</option>
                        <option value="5">5 (Mangelhaft)</option>
                        <option value="5-">5- (Mangelhaft minus)</option>
                        <option value="6+">6+ (Ungenügend plus)</option>
                        <option value="6">6 (Ungenügend)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="individual-grade-comment">Begründung (optional)</label>
                    <textarea id="individual-grade-comment" class="form-control" rows="3" placeholder="Begründung für die individuelle Note..."></textarea>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="saveIndividualGrade()">Speichern</button>
                </div>
            </div>
            
            <!-- Klasse klonen Modal -->
            <div id="clone-class-modal" class="modal" style="display: none;">
                <h2>Klasse klonen</h2>
                <div class="form-group">
                    <input type="text" id="clone-class-new-name" class="form-control" placeholder="z.B. 9a Kopie, 10b_2">
                </div>
                
                <div class="form-group">
                    <p>Es werden nur die Schüler übernommen.</p>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="cloneClass()">Klonen</button>
                </div>
            </div>
            
            <!-- Modal für Rechenweg in der Übersicht -->
           <div id="calculation-path-modal" class="modal" style="display: none;">
    <div class="modal-header-container">
        <h2>Rechenweg</h2>
        <button class="btn btn-secondary btn-icon btn-grade-table corner-button" onclick="toggleGradeTable()">
            <i class="fas fa-table"></i> Notentabelle
        </button>
    </div>
    
    <p id="calculation-path-student-name">Schüler: </p>
    
    <div id="calculation-path-content" class="calculation" style="display: block;">
        <!-- Rechenweg wird dynamisch eingefügt -->
    </div>
    
    <div style="text-align: right; margin-top: 20px;">
        <button class="btn btn-light" onclick="hideModal()">Schließen</button>
    </div>
</div>
            
            <!-- Modal für Verlauf in der Hausaufgaben-Ansicht -->
            <div id="hw-history-modal" class="modal" style="display: none;">
                <h2>Verlauf</h2>
                <p id="hw-history-student-name">Schüler: </p>
                <div class="hw-history-container">
                    <div id="hw-history-list" class="hw-history-list">
                        <!-- Verlaufseinträge werden dynamisch eingefügt -->
                    </div>
                    <div id="hw-history-empty" class="empty-state" style="display: none;">
                        <i class="fas fa-history"></i>
                        <p>Keine Einträge im Verlauf vorhanden</p>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Zurück</button>
                </div>
            </div>
            
            <!-- Modal für mündliche Note für alle hinzufügen -->
            <div id="add-oral-grade-all-modal" class="modal" style="display: none;">
                <h2>Mündliche Noten für alle Schüler eingeben</h2>
                <div id="oral-grade-modal-content">
                    <!-- Schüler Name -->
                    <div class="form-group">
                        <h3 id="current-student-name">Schüler Name</h3>
                    </div>
                    <!-- Noten Buttons -->
                    <div class="form-group">
                        <label>Noten:</label>
                        <div class="weight-buttons">
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('1')">1</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('1-')">1-</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('2+')">2+</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('2')">2</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('2-')">2-</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('3+')">3+</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('3')">3</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('3-')">3-</button>
                        </div>
                        <div class="weight-buttons">
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('4+')">4+</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('4')">4</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('4-')">4-</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('5+')">5+</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('5')">5</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('5-')">5-</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('6+')">6+</button>
                            <button class="btn btn-sm weight-btn" onclick="selectOralGrade('6')">6</button>
                        </div>
                    </div>
                    <!-- Navigation -->
                    <div class="form-group" style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-secondary" id="back-student-btn" onclick="backStudent()" style="display: none;">Zurück</button>
                        <button class="btn btn-primary" id="next-student-btn" onclick="nextStudent()">Weiter</button>
                        <button class="btn btn-danger" onclick="cancelOralGradeAll()">Abbrechen</button>
                    </div>
                </div>
            </div>
            
            <!-- Modal für mündliche Note für einzelnen Schüler hinzufügen -->
            <div id="add-oral-grade-single-modal" class="modal" style="display: none;">
                <h2>Mündliche Note für einzelnen Schüler</h2>
                <div class="form-group">
                    <label for="single-oral-student-search">Schüler suchen:</label>
                    <input type="text" id="single-oral-student-search" class="form-control" placeholder="Schüler suchen..." oninput="filterSingleOralStudents()" autocomplete="off">
                    <ul class="search-suggestions" id="single-oral-student-suggestions"></ul>
                </div>
                <div class="form-group">
                    <label>Noten:</label>
                    <div class="weight-buttons">
                        <button class="btn btn-sm weight-btn" data-grade="1" onclick="selectSingleOralGrade('1')">1</button>
                        <button class="btn btn-sm weight-btn" data-grade="1-" onclick="selectSingleOralGrade('1-')">1-</button>
                        <button class="btn btn-sm weight-btn" data-grade="2+" onclick="selectSingleOralGrade('2+')">2+</button>
                        <button class="btn btn-sm weight-btn" data-grade="2" onclick="selectSingleOralGrade('2')">2</button>
                        <button class="btn btn-sm weight-btn" data-grade="2-" onclick="selectSingleOralGrade('2-')">2-</button>
                        <button class="btn btn-sm weight-btn" data-grade="3+" onclick="selectSingleOralGrade('3+')">3+</button>
                        <button class="btn btn-sm weight-btn" data-grade="3" onclick="selectSingleOralGrade('3')">3</button>
                        <button class="btn btn-sm weight-btn" data-grade="3-" onclick="selectSingleOralGrade('3-')">3-</button>
                    </div>
                    <div class="weight-buttons">
                        <button class="btn btn-sm weight-btn" data-grade="4+" onclick="selectSingleOralGrade('4+')">4+</button>
                        <button class="btn btn-sm weight-btn" data-grade="4" onclick="selectSingleOralGrade('4')">4</button>
                        <button class="btn btn-sm weight-btn" data-grade="4-" onclick="selectSingleOralGrade('4-')">4-</button>
                        <button class="btn btn-sm weight-btn" data-grade="5+" onclick="selectSingleOralGrade('5+')">5+</button>
                        <button class="btn btn-sm weight-btn" data-grade="5" onclick="selectSingleOralGrade('5')">5</button>
                        <button class="btn btn-sm weight-btn" data-grade="5-" onclick="selectSingleOralGrade('5-')">5-</button>
                        <button class="btn btn-sm weight-btn" data-grade="6+" onclick="selectSingleOralGrade('6+')">6+</button>
                        <button class="btn btn-sm weight-btn" data-grade="6" onclick="selectSingleOralGrade('6')">6</button>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="saveSingleOralGrade()">Speichern</button>
                </div>
            </div>
            
            <!-- Modal für mündliche Note bearbeiten -->
            <div id="edit-oral-grade-modal" class="modal" style="display: none;">
                <h2>Mündliche Note bearbeiten</h2>
                <div class="form-group">
                    <label for="edit-oral-grade">Neue Note</label>
                    <select id="edit-oral-grade" class="form-control">
                        <option value="1">1</option>
                        <option value="1-">1-</option>
                        <option value="2+">2+</option>
                        <option value="2">2</option>
                        <option value="2-">2-</option>
                        <option value="3+">3+</option>
                        <option value="3">3</option>
                        <option value="3-">3-</option>
                        <option value="4+">4+</option>
                        <option value="4">4</option>
                        <option value="4-">4-</option>
                        <option value="5+">5+</option>
                        <option value="5">5</option>
                        <option value="5-">5-</option>
                        <option value="6+">6+</option>
                        <option value="6">6</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="saveEditedOralGrade()">Speichern</button>
                    <button class="btn btn-danger" onclick="confirmDeleteOralGrade()">Note löschen</button>
                </div>
            </div>
            
            <!-- Modal für Bewertung im Sitzplan -->
            <div id="evaluation-modal" class="modal" style="display: none;">
                <h2>Bewertung</h2>
                <div id="evaluation-modal-content">
                    <!-- Bewertungsinhalte werden dynamisch eingefügt -->
                </div>
            </div>
            
            <!-- Modal für Projekt löschen -->
            <div id="delete-project-modal" class="modal" style="display: none;">
                <h2>Projekte löschen</h2>
                <p id="delete-project-student-name">Schüler: </p>
                
                <!-- Löschmodus Auswahl -->
                <div class="form-group">
                    <div class="delete-mode-options">
                        <div class="radio-option">
                            <input type="radio" id="delete-mode-single" name="delete-mode" value="single" checked>
                            <label for="delete-mode-single">Nur für diesen Schüler</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="delete-mode-all" name="delete-mode" value="all">
                            <label for="delete-mode-all">Für alle Schüler</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <div id="delete-project-list" class="project-list">
                        <!-- Projekte werden dynamisch eingefügt -->
                    </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-danger" onclick="deleteSelectedProjects()">Ausgewählte löschen</button>
                </div>
            </div>
            
            <!-- Modal für Schülerliste Export -->
            <div id="export-students-modal" class="modal" style="display: none;">
                <h2>Schülerliste exportieren</h2>
                <div class="form-group">
                    <label for="export-title">Titel für den Export</label>
                    <input type="text" id="export-title" class="form-control" placeholder="z.B. Klassenliste">
                </div>
                <div class="form-group">
                    <select id="num-columns" class="form-control" onchange="updateColumns()">
                        <option value="1">1 Spalte</option>
                        <option value="2">2 Spalten</option>
                        <option value="3">3 Spalten</option>
                        <option value="4">4 Spalten</option>
                        <option value="5">5 Spalten</option>
                        <option value="6">6 Spalten</option>
                        <option value="7">7 Spalten</option>
                        <option value="8">8 Spalten</option>
                        <option value="9">9 Spalten</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="exportStudentsList()">Exportieren</button>
                </div>
            </div>
            
            <!-- Modal für Projekt zu allen Schülern hinzufügen -->
            <div id="add-project-to-all-modal" class="modal" style="display: none;">
                <h2>Projekt zu allen Schülern hinzufügen</h2>
                <div class="form-group">
                    <input type="text" id="project-name-all" class="form-control" placeholder="z.B. Testarbeit 1">
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="addProjectToAll()">Hinzufügen</button>
                </div>
            </div>
            
            <!-- Modal für Projekt für alle Schüler löschen -->
            <div id="delete-project-for-all-modal" class="modal" style="display: none;">
                <h2>Projekt für alle Schüler löschen</h2>
                <div class="form-group">
                    <select id="delete-project-select" class="form-control">
                        <!-- Optionen werden dynamisch eingefügt -->
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-danger" onclick="deleteProjectForAll()">Löschen</button>
                </div>
            </div>
            
            <!-- Modal für Liste bearbeiten -->
            <div id="edit-list-modal" class="modal" style="display: none;">
                <h2>Liste bearbeiten</h2>
                <div class="form-group">
                    <select id="edit-list-select" class="form-control">
                        <!-- Optionen werden dynamisch eingefügt -->
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="editSelectedList()">Bearbeiten</button>
                </div>
            </div>
            
            <!-- Modal für Liste löschen -->
            <div id="delete-list-modal" class="modal" style="display: none;">
                <h2>Liste löschen</h2>
                <div class="form-group">
                    <select id="delete-list-select" class="form-control">
                        <!-- Optionen werden dynamisch eingefügt -->
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-danger" onclick="deleteSelectedList()">Löschen</button>
                </div>
            </div>
            
            <!-- Modal für Liste umbenennen -->
            <div id="rename-list-modal" class="modal" style="display: none;">
                <h2>Liste umbenennen</h2>
                <div class="form-group">
                    <input type="text" id="rename-list-input" class="form-control" placeholder="Listenname">
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="renameList()">Speichern</button>
                </div>
            </div>
            
            <!-- Modal für Klasse bearbeiten -->
            <div id="edit-class-modal" class="modal" style="display: none;">
                <h2>Klasse bearbeiten</h2>
                <div class="form-group">
                    <input type="text" id="edit-class-input" class="form-control" placeholder="Klassenname">
                </div>
                <div class="form-group">
                    <label for="edit-class-color">Klassenfarbe:</label>
                    <select id="edit-class-color" class="form-control">
                        <option value="#6c757d">Grau</option>
                        <option value="#007bff">Blau</option>
                        <option value="#28a745">Grün</option>
                        <option value="#dc3545">Rot</option>
                        <option value="#ffc107">Gelb</option>
                        <option value="#6f42c1">Lila</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="saveEditedClass()">Speichern</button>
                </div>
            </div>
            
            <!-- Modal für Schüler bearbeiten -->
            <div id="edit-student-modal" class="modal" style="display: none;">
                <h2>Schüler bearbeiten</h2>
                <div class="form-group">
                    <input type="text" id="edit-student-input" class="form-control" placeholder="Schülername">
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-light" onclick="hideModal()">Abbrechen</button>
                    <button class="btn btn-primary" onclick="saveEditedStudent()">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SweetAlert für bessere Dialoge -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <!-- html2canvas für Export-Funktionen -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
